(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{peSK:function(e,n,t){"use strict";function i(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}t.d(n,"a",(function(){return s}));var a=1,o=1,s=function(){function e(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}var n=e.prototype;return n.addChannel=function(e){var n=e.delay,t=void 0===n?0:n,i=e.duration,r=void 0===i?Number.POSITIVE_INFINITY:i,o=e.rate,s=void 0===o?1:o,c=e.repeat,l=a++,u={time:0,delay:t,duration:r,rate:s,repeat:void 0===c?1:c};return this._setChannelTime(u,this.time),this.channels.set(l,u),l},n.removeChannel=function(e){this.channels.delete(e);for(var n,t=i(this.animations);!(n=t()).done;){var r=n.value,a=r[0];r[1].channel===e&&this.detachAnimation(a)}},n.isFinished=function(e){var n=this.channels.get(e);return void 0!==n&&this.time>=n.delay+n.duration*n.repeat},n.getTime=function(e){if(void 0===e)return this.time;var n=this.channels.get(e);return void 0===n?-1:n.time},n.setTime=function(e){this.time=Math.max(0,e);for(var n,t=i(this.channels.values());!(n=t()).done;){var r=n.value;this._setChannelTime(r,this.time)}for(var a,o=i(this.animations.values());!(a=o()).done;){var s=a.value,c=s.animation,l=s.channel;c.setTime(this.getTime(l))}},n.play=function(){this.playing=!0},n.pause=function(){this.playing=!1,this.lastEngineTime=-1},n.reset=function(){this.setTime(0)},n.attachAnimation=function(e,n){var t=o++;return this.animations.set(t,{animation:e,channel:n}),e.setTime(this.getTime(n)),t},n.detachAnimation=function(e){this.animations.delete(e)},n.update=function(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)},n._setChannelTime=function(e,n){var t=n-e.delay;t>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,t)%e.duration,e.time*=e.rate)},e}()},rIz9:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return T}));var i=t("dI71"),r=t("q1tI"),a=t.n(r),o=t("z0FI"),s=t("rePB"),c=(t("PF2M"),t("IZzc"),t("u/XE")),l=t("yIe6"),u=t("peSK"),f=t("ebS/"),m=t("tdDb"),h=t("4mOd"),d=t("K3wf"),p=t("kh/P"),v=t("yeNo");function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){Object(s.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var y=Object(c.a)(),C=b({inject:{"vs:MY_SHADER_HOOK_pickColor":"picking_setPickingColor(color.rgb);","fs:MY_SHADER_HOOK_fragmentColor":{injection:"color = picking_filterColor(color);",order:Number.POSITIVE_INFINITY}}},h.a),O=b({inject:{"fs:MY_SHADER_HOOK_fragmentColor":"color = dirlight_filterColor(color);"}},d.a),w=function(e){function n(n,t){void 0===t&&(t={});for(var i=[],r=0;r<256;r++)for(var a=3*r-382.5,o=0;o<256;o++){var s=3*o-382.5;i.push(a,s)}for(var c=new Float32Array(i),u=new Uint8ClampedArray(131072),f=0;f<256;f++)for(var h=0;h<256;h++)u[2*(256*f+h)+0]=f,u[2*(256*f+h)+1]=h;var d=new Float32Array(196608).map((function(e,n){return.75*y()+.25})),p=n.createBuffer(c),v=n.createBuffer(d),g=n.createBuffer(u),w=m.i.getDefaultProgramManager(n);return w.addShaderHook("vs:MY_SHADER_HOOK_pickColor(inout vec4 color)"),w.addShaderHook("fs:MY_SHADER_HOOK_fragmentColor(inout vec4 color)"),e.call(this,n,b(b({},t),{},{vs:"attribute float instanceSizes;\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 instanceOffsets;\nattribute vec3 instanceColors;\nattribute vec2 instancePickingColors;\n\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform float uTime;\n\nvarying vec3 color;\n\nvoid main(void) {\n  vec3 normal = vec3(uModel * vec4(normals, 1.0));\n\n  // Set up data for modules\n  color = instanceColors;\n  project_setNormal(normal);\n  vec4 pickColor = vec4(0., instancePickingColors, 1.0);\n  MY_SHADER_HOOK_pickColor(pickColor);\n\n  // Vertex position (z coordinate undulates with time), and model rotates around center\n  float delta = length(instanceOffsets);\n  vec4 offset = vec4(instanceOffsets, sin((uTime + delta) * 0.1) * 16.0, 0);\n  gl_Position = uProjection * uView * (uModel * vec4(positions * instanceSizes, 1.0) + offset);\n}\n",fs:"precision highp float;\n\nvarying vec3 color;\n\nvoid main(void) {\n  gl_FragColor = vec4(color, 1.);\n  MY_SHADER_HOOK_fragmentColor(gl_FragColor);\n}\n",modules:[O,C],isInstanced:!0,instanceCount:65536,geometry:new l.a,attributes:{instanceSizes:new Float32Array([1]),instanceOffsets:[p,{divisor:1}],instanceColors:[v,{divisor:1}],instancePickingColors:[g,{divisor:1}]},parameters:{depthWriteEnabled:!0,depthCompare:"less-equal"}}))||this}return Object(i.a)(n,e),n}(m.e),_=function(e){function n(n){var t,i=n.device,r=n.animationLoop;return(t=e.call(this)||this).timeline=new u.a,r.attachTimeline(t.timeline),t.timeline.play(),t.timelineChannels={timeChannel:t.timeline.addChannel({rate:.01}),eyeXChannel:t.timeline.addChannel({rate:3e-4}),eyeYChannel:t.timeline.addChannel({rate:4e-4}),eyeZChannel:t.timeline.addChannel({rate:2e-4})},t.cube=new w(i),t}Object(i.a)(n,e);var t=n.prototype;return t.onRender=function(e){var n=e.device,t=e.aspect,i=e.tick,r=(e.gl,e.framebuffer,e._mousePosition,this.timelineChannels),a=r.timeChannel,o=r.eyeXChannel,s=r.eyeYChannel,c=r.eyeZChannel;Object(m.q)(n,{color:[0,0,0,1],depth:!0}),this.cube.setUniforms({uTime:this.timeline.getTime(a),uProjection:(new p.a).perspective({fov:Object(v.e)(60),aspect:t,near:1,far:2048}),uView:(new p.a).lookAt({center:[0,0,0],eye:[256*Math.cos(this.timeline.getTime(o))/2,256*Math.sin(this.timeline.getTime(s))/2,256*(Math.sin(this.timeline.getTime(c))+1)/4+32]}),uModel:(new p.a).rotateX(.01*i).rotateY(.013*i)}),this.cube.draw()},t.onFinalize=function(e){e.gl;this.cube.delete()},n}(f.a);_.info="\n<p>\nCube drawn with <b>instanced rendering</b>.\n<p>\nA luma.gl <code>Cube</code>, rendering 65,536 instances in a\nsingle GPU draw call using instanced vertex attributes.\n",_.props={createFramebuffer:!0,debug:!0},"undefined"==typeof window||window.website||f.a.run(_);var T=function(e){function n(){return e.apply(this,arguments)||this}return Object(i.a)(n,e),n.prototype.render=function(){var e=this.props,n=e.pageContext,t=e.panel,i=void 0===t||t,r=n&&n.exampleConfig||{};return a.a.createElement(o.a,{AnimationLoop:_,exampleConfig:r,panel:i})},n}(a.a.Component)},"u/XE":function(e,n,t){"use strict";function i(){var e=1,n=1;return function(){return e=Math.sin(17.23*n),n=Math.cos(27.92*e),(t=1432.71*Math.abs(e*n))-Math.floor(t);var t}}t.d(n,"a",(function(){return i}));i()}}]);