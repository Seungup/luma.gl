(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"/wHA":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var a=r("lHlH");function i(t,e,r){var i=r.removedProps,n=void 0===i?{}:i,s=r.deprecatedProps,o=void 0===s?{}:s,u=r.replacedProps,c=void 0===u?{}:u;for(var f in n)if(f in e){var h=n[f]?t+"."+n[f]:"N/A";a.i.removed(t+"."+f,h)()}for(var l in o)if(l in e){var d=o[l];a.i.deprecated(t+"."+l,t+"."+d)()}var g=null;for(var E in c)if(E in e){var b=c[E];a.i.deprecated(t+"."+E,t+"."+b)(),(g=g||Object.assign({},e))[b]=e[E],delete g[E]}return g||e}},"2aL3":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var a,i=r("mECX"),n=r("2urO"),s={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};e.b=((a={})[s.WEBGL2]=[!1,!0],a[s.VERTEX_ARRAY_OBJECT]=["OES_vertex_array_object",!0],a[s.TIMER_QUERY]=["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],a[s.INSTANCED_RENDERING]=["ANGLE_instanced_arrays",!0],a[s.MULTIPLE_RENDER_TARGETS]=["WEBGL_draw_buffers",!0],a[s.ELEMENT_INDEX_UINT32]=["OES_element_index_uint",!0],a[s.BLEND_EQUATION_MINMAX]=["EXT_blend_minmax",!0],a[s.FLOAT_BLEND]=["EXT_float_blend"],a[s.COLOR_ENCODING_SRGB]=["EXT_sRGB",!0],a[s.TEXTURE_DEPTH]=["WEBGL_depth_texture",!0],a[s.TEXTURE_FLOAT]=["OES_texture_float",!0],a[s.TEXTURE_HALF_FLOAT]=["OES_texture_half_float",!0],a[s.TEXTURE_FILTER_LINEAR_FLOAT]=["OES_texture_float_linear"],a[s.TEXTURE_FILTER_LINEAR_HALF_FLOAT]=["OES_texture_half_float_linear"],a[s.TEXTURE_FILTER_ANISOTROPIC]=["EXT_texture_filter_anisotropic"],a[s.COLOR_ATTACHMENT_RGBA32F]=[function(t){var e,r=new n.a(t,{format:t.RGBA,type:t.FLOAT,dataFormat:t.RGBA}),a=new i.a(t,{id:"test-framebuffer",check:!1,attachments:(e={},e[t.COLOR_ATTACHMENT0]=r,e)}),s=a.getStatus();return r.delete(),a.delete(),s===t.FRAMEBUFFER_COMPLETE},"EXT_color_buffer_float"],a[s.COLOR_ATTACHMENT_FLOAT]=[!1,"EXT_color_buffer_float"],a[s.COLOR_ATTACHMENT_HALF_FLOAT]=["EXT_color_buffer_half_float"],a[s.GLSL_FRAG_DATA]=["WEBGL_draw_buffers",!0],a[s.GLSL_FRAG_DEPTH]=["EXT_frag_depth",!0],a[s.GLSL_DERIVATIVES]=["OES_standard_derivatives",!0],a[s.GLSL_TEXTURE_LOD]=["EXT_shader_texture_lod",!0],a)},"2urO":function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var a=r("JX7q"),i=r("dI71"),n=r("73Rc"),s=r("lHlH"),o=r("rfXe"),u=r("HOtY"),c=function(t){function e(e,r){var i;return void 0===r&&(r={}),Object(s.b)(e),(r instanceof Promise||"string"==typeof r)&&(r={data:r}),"string"==typeof r.data&&(r=Object.assign({},r,{data:Object(u.a)(r.data)})),(i=t.call(this,e,Object.assign({},r,{target:n.a.TEXTURE_2D}))||this).initialize(r),Object.seal(Object(a.a)(i)),i}return Object(i.a)(e,t),e.isSupported=function(t,e){return o.a.isSupported(t,e)},e}(o.a)},"3LCa":function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var a=r("vuIU"),i=r("JX7q"),n=r("dI71"),s=(r("PF2M"),r("IZzc"),r("73Rc")),o=r("98Cc"),u=r("YJ55"),c=r("UBYz"),f=r("lHlH"),h=r("Iq2B"),l=r("/wHA"),d={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},g={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:d},E={removedProps:d},b=function(t){function e(e,r){var a;return void 0===r&&(r={}),(a=t.call(this,e,r)||this).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),a.target=r.target||(a.gl.webgl2?s.a.COPY_READ_BUFFER:s.a.ARRAY_BUFFER),a.initialize(r),Object.seal(Object(i.a)(a)),a}Object(n.a)(e,t);var r=e.prototype;return r.getElementCount=function(t){return void 0===t&&(t=this.accessor),Math.round(this.byteLength/u.a.getBytesPerElement(t))},r.getVertexCount=function(t){return void 0===t&&(t=this.accessor),Math.round(this.byteLength/u.a.getBytesPerVertex(t))},r.initialize=function(t){return void 0===t&&(t={}),ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=Object(l.a)("Buffer",t,g),this.usage=t.usage||s.a.STATIC_DRAW,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this},r.setProps=function(t){return"accessor"in(t=Object(l.a)("Buffer",t,E))&&this.setAccessor(t.accessor),this},r.setAccessor=function(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new u.a(t),this},r.reallocate=function(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)},r.setData=function(t){return this.initialize(t)},r.subData=function(t){ArrayBuffer.isView(t)&&(t={data:t});var e=t,r=e.data,a=e.offset,i=void 0===a?0:a,n=e.srcOffset,o=void 0===n?0:n,u=t.byteLength||t.length;Object(h.a)(r);var c=this.gl.webgl2?s.a.COPY_WRITE_BUFFER:this.target;return this.gl.bindBuffer(c,this.handle),0!==o||void 0!==u?(Object(f.a)(this.gl),this.gl.bufferSubData(this.target,i,r,o,u)):this.gl.bufferSubData(c,i,r),this.gl.bindBuffer(c,null),this.debugData=null,this._inferType(r),this},r.copyData=function(t){var e=t.sourceBuffer,r=t.readOffset,a=void 0===r?0:r,i=t.writeOffset,n=void 0===i?0:i,o=t.size,u=this.gl;return Object(f.a)(u),u.bindBuffer(s.a.COPY_READ_BUFFER,e.handle),u.bindBuffer(s.a.COPY_WRITE_BUFFER,this.handle),u.copyBufferSubData(s.a.COPY_READ_BUFFER,s.a.COPY_WRITE_BUFFER,a,n,o),u.bindBuffer(s.a.COPY_READ_BUFFER,null),u.bindBuffer(s.a.COPY_WRITE_BUFFER,null),this.debugData=null,this},r.getData=function(t){var e=void 0===t?{}:t,r=e.dstData,a=void 0===r?null:r,i=e.srcByteOffset,n=void 0===i?0:i,o=e.dstOffset,u=void 0===o?0:o,l=e.length,d=void 0===l?0:l;Object(f.a)(this.gl);var g,E,b=Object(c.c)(this.accessor.type||s.a.FLOAT,{clamped:!1}),m=this._getAvailableElementCount(n),_=u;a?g=(E=a.length)-_:E=_+(g=Math.min(m,d||m));var v=Math.min(m,g);return d=d||v,Object(h.a)(d<=v),a=a||new b(E),this.gl.bindBuffer(s.a.COPY_READ_BUFFER,this.handle),this.gl.getBufferSubData(s.a.COPY_READ_BUFFER,n,a,u,d),this.gl.bindBuffer(s.a.COPY_READ_BUFFER,null),a},r.bind=function(t){var e=void 0===t?{}:t,r=e.target,a=void 0===r?this.target:r,i=e.index,n=void 0===i?this.accessor&&this.accessor.index:i,o=e.offset,u=void 0===o?0:o,c=e.size;return a===s.a.UNIFORM_BUFFER||a===s.a.TRANSFORM_FEEDBACK_BUFFER?void 0!==c?this.gl.bindBufferRange(a,n,this.handle,u,c):(Object(h.a)(0===u),this.gl.bindBufferBase(a,n,this.handle)):this.gl.bindBuffer(a,this.handle),this},r.unbind=function(t){var e=void 0===t?{}:t,r=e.target,a=void 0===r?this.target:r,i=e.index,n=void 0===i?this.accessor&&this.accessor.index:i;return a===s.a.UNIFORM_BUFFER||a===s.a.TRANSFORM_FEEDBACK_BUFFER?this.gl.bindBufferBase(a,n,null):this.gl.bindBuffer(a,null),this},r.getDebugData=function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})},r.invalidateDebugData=function(){this.debugData=null},r._setData=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.byteLength+e),Object(h.a)(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();var a=this._getTarget();this.gl.bindBuffer(a,this.handle),this.gl.bufferData(a,r,this.usage),this.gl.bufferSubData(a,e,t),this.gl.bindBuffer(a,null),this.debugData=t.slice(0,10),this.bytesUsed=r,this._trackAllocatedMemory(r);var i=Object(c.b)(t);return Object(h.a)(i),this.setAccessor(new u.a(this.accessor,{type:i})),this},r._setByteLength=function(t,e){void 0===e&&(e=this.usage),Object(h.a)(t>=0),this._trackDeallocatedMemory();var r=t;0===t&&(r=new Float32Array(0));var a=this._getTarget();return this.gl.bindBuffer(a,this.handle),this.gl.bufferData(a,r,e),this.gl.bindBuffer(a,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this},r._getTarget=function(){return this.gl.webgl2?s.a.COPY_WRITE_BUFFER:this.target},r._getAvailableElementCount=function(t){var e=t/Object(c.c)(this.accessor.type||s.a.FLOAT,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e},r._inferType=function(t){this.accessor.type||this.setAccessor(new u.a(this.accessor,{type:Object(c.b)(t)}))},r._createHandle=function(){return this.gl.createBuffer()},r._deleteHandle=function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()},r._getParameter=function(t){this.gl.bindBuffer(this.target,this.handle);var e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e},r.setByteLength=function(t){return f.i.deprecated("setByteLength","reallocate")(),this.reallocate(t)},r.updateAccessor=function(t){return f.i.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new u.a(this.accessor,t),this},Object(a.a)(e,[{key:"type",get:function(){return f.i.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return f.i.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),e}(o.a)},"62vL":function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return n}));var a=r("Iq2B");function i(t,e){if("string"!=typeof e)return e;var r=Number(e);if(!isNaN(r))return r;var i=t[e=e.replace(/^.*\./,"")];return Object(a.a)(void 0!==i,"Accessing undefined constant GL."+e),i}function n(t,e){for(var r in e=Number(e),t)if(t[r]===e)return"GL."+r;return String(e)}},"7rsd":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var a=r("lHlH");function i(t,e,r,i){var n="See luma.gl "+r+" Upgrade Guide at https://luma.gl/docs/upgrade-guide",s=Object.getPrototypeOf(t);i.forEach((function(t){s.methodName||(s[t]=function(){throw a.i.removed("Calling removed method "+e+"."+t+": ",n)(),new Error(t)})}))}},"98Cc":function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var a=r("vuIU"),i=r("lHlH"),n=r("JR+K"),s=r("62vL"),o=r("Iq2B"),u=r("BunF"),c=r("7rsd");function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var l="Resource subclass must define virtual methods",d=function(){function t(t,e){void 0===e&&(e={}),Object(i.b)(t);var r=e,a=r.id,n=r.userData,s=void 0===n?{}:n;this.gl=t,this.gl2=t,this.id=a||Object(u.c)(this.constructor.name),this.userData=s,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}var e=t.prototype;return e.toString=function(){return this.constructor.name+"("+this.id+")"},e.delete=function(t){var e=(void 0===t?{}:t).deleteChildren,r=void 0!==e&&e,a=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,a&&r&&a.filter(Boolean).forEach((function(t){return t.delete()})),this},e.bind=function(t){return void 0===t&&(t=this.handle),"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e);var e},e.unbind=function(){this.bind(null)},e.getParameter=function(t,e){void 0===e&&(e={}),t=Object(s.b)(this.gl,t),Object(o.a)(t);var r=(this.constructor.PARAMETERS||{})[t];if(r){var a=Object(i.h)(this.gl);if(!((!("webgl2"in r)||a)&&(!("extension"in r)||this.gl.getExtension(r.extension)))){var n=r.webgl1,u="webgl2"in r?r.webgl2:r.webgl1;return a?u:n}}return this._getParameter(t,e)},e.getParameters=function(t){void 0===t&&(t={});for(var e,r=t,a=r.parameters,n=r.keys,o=this.constructor.PARAMETERS||{},u=Object(i.h)(this.gl),c={},h=f(a||Object.keys(o));!(e=h()).done;){var l=e.value,d=o[l];if(d&&(!("webgl2"in d)||u)&&(!("extension"in d)||this.gl.getExtension(d.extension))){var g=n?Object(s.a)(this.gl,l):l;c[g]=this.getParameter(l,t),n&&"GLenum"===d.type&&(c[g]=Object(s.a)(this.gl,c[g]))}}return c},e.setParameter=function(t,e){t=Object(s.b)(this.gl,t),Object(o.a)(t);var r=(this.constructor.PARAMETERS||{})[t];if(r){var a=Object(i.h)(this.gl);if(!((!("webgl2"in r)||a)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(e=Object(s.b)(e))}return this._setParameter(t,e),this},e.setParameters=function(t){for(var e in t)this.setParameter(e,t[e]);return this},e.stubRemovedMethods=function(t,e,r){return Object(c.a)(this,t,e,r)},e.initialize=function(t){},e._createHandle=function(){throw new Error(l)},e._deleteHandle=function(){throw new Error(l)},e._bindHandle=function(t){throw new Error(l)},e._getOptsFromHandle=function(){throw new Error(l)},e._getParameter=function(t,e){throw new Error(l)},e._setParameter=function(t,e){throw new Error(l)},e._context=function(){return this.gl.luma=this.gl.luma||{},this.gl.luma},e._addStats=function(){var t=this.constructor.name,e=n.a.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get(t+"s Created").incrementCount(),e.get(t+"s Active").incrementCount()},e._removeStats=function(){var t=this.constructor.name;n.a.get("Resource Counts").get(t+"s Active").decrementCount()},e._trackAllocatedMemory=function(t,e){void 0===e&&(e=this.constructor.name);var r=n.a.get("Memory Usage");r.get("GPU Memory").addCount(t),r.get(e+" Memory").addCount(t),this.byteLength=t},e._trackDeallocatedMemory=function(t){void 0===t&&(t=this.constructor.name);var e=n.a.get("Memory Usage");e.get("GPU Memory").subtractCount(this.byteLength),e.get(t+" Memory").subtractCount(this.byteLength),this.byteLength=0},Object(a.a)(t,[{key:"handle",get:function(){return this._handle}}]),t}()},AFhB:function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return h})),r.d(e,"e",(function(){return l}));var a,i,n,s=r("73Rc"),o=r("lHlH"),u=((a={})[s.a.RGB]={dataFormat:s.a.RGB,types:[s.a.UNSIGNED_BYTE,s.a.UNSIGNED_SHORT_5_6_5]},a[s.a.RGBA]={dataFormat:s.a.RGBA,types:[s.a.UNSIGNED_BYTE,s.a.UNSIGNED_SHORT_4_4_4_4,s.a.UNSIGNED_SHORT_5_5_5_1]},a[s.a.ALPHA]={dataFormat:s.a.ALPHA,types:[s.a.UNSIGNED_BYTE]},a[s.a.LUMINANCE]={dataFormat:s.a.LUMINANCE,types:[s.a.UNSIGNED_BYTE]},a[s.a.LUMINANCE_ALPHA]={dataFormat:s.a.LUMINANCE_ALPHA,types:[s.a.UNSIGNED_BYTE]},a[s.a.R32F]={dataFormat:s.a.RED,types:[s.a.FLOAT],gl2:!0},a[s.a.RG32F]={dataFormat:s.a.RG,types:[s.a.FLOAT],gl2:!0},a[s.a.RGB32F]={dataFormat:s.a.RGB,types:[s.a.FLOAT],gl2:!0},a[s.a.RGBA32F]={dataFormat:s.a.RGBA,types:[s.a.FLOAT],gl2:!0},a),c=((i={})[s.a.RED]=1,i[s.a.RED_INTEGER]=1,i[s.a.RG]=2,i[s.a.RG_INTEGER]=2,i[s.a.RGB]=3,i[s.a.RGB_INTEGER]=3,i[s.a.RGBA]=4,i[s.a.RGBA_INTEGER]=4,i[s.a.DEPTH_COMPONENT]=1,i[s.a.DEPTH_STENCIL]=1,i[s.a.ALPHA]=1,i[s.a.LUMINANCE]=1,i[s.a.LUMINANCE_ALPHA]=2,i),f=((n={})[s.a.FLOAT]=4,n[s.a.UNSIGNED_INT]=4,n[s.a.INT]=4,n[s.a.UNSIGNED_SHORT]=2,n[s.a.SHORT]=2,n[s.a.HALF_FLOAT]=2,n[s.a.BYTE]=1,n[s.a.UNSIGNED_BYTE]=1,n);function h(t,e){var r=u[e];if(!r)return!1;if(void 0===r.gl1&&void 0===r.gl2)return!0;var a=Object(o.h)(t)&&r.gl2||r.gl1;return"string"==typeof a?t.getExtension(a):a}function l(t,e){var r=u[e];switch(r&&r.types[0]){case s.a.FLOAT:return t.getExtension("OES_texture_float_linear");case s.a.HALF_FLOAT:return t.getExtension("OES_texture_half_float_linear");default:return!0}}},BunF:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return o}));var a=r("Iq2B"),i={};function n(t){return void 0===t&&(t="id"),i[t]=i[t]||1,t+"-"+i[t]++}function s(t){return Object(a.a)("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function o(t){var e=!0;for(var r in t){e=!1;break}return e}},EpVc:function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return f}));var a=r("73Rc"),i=(r("3LCa"),r("mECX")),n=(r("rfXe"),r("lHlH"),r("UBYz")),s=r("Iq2B");function o(t){switch(t){case a.a.ALPHA:case a.a.R32F:case a.a.RED:return 1;case a.a.RG32F:case a.a.RG:return 2;case a.a.RGB:case a.a.RGB32F:return 3;case a.a.RGBA:case a.a.RGBA32F:return 4;default:return Object(s.a)(!1),0}}var u=r("kgJN");function c(t,e){void 0===e&&(e={});var r=e,i=r.sourceX,u=void 0===i?0:i,c=r.sourceY,f=void 0===c?0:c,l=r.sourceFormat,d=void 0===l?a.a.RGBA:l,g=e,E=g.sourceAttachment,b=void 0===E?a.a.COLOR_ATTACHMENT0:E,m=g.target,_=void 0===m?null:m,v=g.sourceWidth,A=g.sourceHeight,T=g.sourceType,p=h(t),R=p.framebuffer,y=p.deleteFramebuffer;Object(s.a)(R);var F=R.gl,O=R.handle,I=R.attachments;v=v||R.width,A=A||R.height,b===a.a.COLOR_ATTACHMENT0&&null===O&&(b=a.a.FRONT),Object(s.a)(I[b]),_=function(t,e,r,i,s){if(t)return t;e=e||a.a.UNSIGNED_BYTE;var u=Object(n.c)(e,{clamped:!1}),c=o(r);return new u(i*s*c)}(_,T=T||I[b].type,d,v,A),T=T||Object(n.b)(_);var B=F.bindFramebuffer(a.a.FRAMEBUFFER,O);return F.readPixels(u,f,v,A,d,T,_),F.bindFramebuffer(a.a.FRAMEBUFFER,B||null),y&&R.delete(),_}function f(t,e){for(var r=void 0===e?{}:e,i=r.sourceAttachment,s=void 0===i?a.a.COLOR_ATTACHMENT0:i,o=r.targetMaxHeight,u=void 0===o?Number.MAX_SAFE_INTEGER:o,f=c(t,{sourceAttachment:s}),h=t.width,l=t.height;l>u;){var d=Object(n.d)({data:f,width:h,height:l});f=d.data,h=d.width,l=d.height}Object(n.a)({data:f,width:h,height:l});var g=document.createElement("canvas");g.width=h,g.height=l;var E=g.getContext("2d"),b=E.createImageData(h,l);return b.data.set(f),E.putImageData(b,0,0),g.toDataURL()}function h(t){return t instanceof i.a?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Object(u.b)(t),deleteFramebuffer:!0}}},IObG:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return s}));r("PF2M"),r("IZzc");var a=r("lHlH"),i=r("Iq2B");function n(t,e){var r=void 0===e?{}:e,n=r.framebuffer,s=void 0===n?null:n,o=r.color,u=void 0===o?null:o,c=r.depth,f=void 0===c?null:c,h=r.stencil,l=void 0===h?null:h,d={};s&&(d.framebuffer=s);var g=0;u&&(g|=16384,!0!==u&&(d.clearColor=u)),f&&(g|=256,!0!==f&&(d.clearDepth=f)),l&&(g|=1024,!0!==f&&(d.clearStencil=f)),Object(i.a)(0!==g,"clear: bad arguments"),Object(a.n)(t,d,(function(){t.clear(g)}))}function s(t,e){var r=void 0===e?{}:e,n=r.framebuffer,s=void 0===n?null:n,o=r.buffer,u=void 0===o?6144:o,c=r.drawBuffer,f=void 0===c?0:c,h=r.value,l=void 0===h?[0,0,0,0]:h;Object(a.a)(t),Object(a.n)(t,{framebuffer:s},(function(){switch(u){case 6144:switch(l.constructor){case Int32Array:t.clearBufferiv(u,f,l);break;case Uint32Array:t.clearBufferuiv(u,f,l);break;case Float32Array:default:t.clearBufferfv(u,f,l)}break;case 6145:t.clearBufferfv(6145,0,[l]);break;case 6146:t.clearBufferiv(6146,0,[l]);break;case 34041:var e=l[0],r=l[1];t.clearBufferfi(34041,0,e,r);break;default:Object(i.a)(!1,"clear: bad arguments")}}))}},Ifu7:function(t,e,r){"use strict";r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return u}));var a,i=r("Iq2B"),n=((a={})[5126]=[5126,1,"float"],a[35664]=[5126,2,"vec2"],a[35665]=[5126,3,"vec3"],a[35666]=[5126,4,"vec4"],a[5124]=[5124,1,"int"],a[35667]=[5124,2,"ivec2"],a[35668]=[5124,3,"ivec3"],a[35669]=[5124,4,"ivec4"],a[5125]=[5125,1,"uint"],a[36294]=[5125,2,"uvec2"],a[36295]=[5125,3,"uvec3"],a[36296]=[5125,4,"uvec4"],a[35670]=[5126,1,"bool"],a[35671]=[5126,2,"bvec2"],a[35672]=[5126,3,"bvec3"],a[35673]=[5126,4,"bvec4"],a[35674]=[5126,8,"mat2"],a[35685]=[5126,8,"mat2x3"],a[35686]=[5126,8,"mat2x4"],a[35675]=[5126,12,"mat3"],a[35687]=[5126,12,"mat3x2"],a[35688]=[5126,12,"mat3x4"],a[35676]=[5126,16,"mat4"],a[35689]=[5126,16,"mat4x2"],a[35690]=[5126,16,"mat4x3"],a);function s(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Object(i.a)(!1),0}}function o(t){var e=n[t];return e?{type:e[0],components:e[1]}:null}function u(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=5126}for(var r in n){var a=n[r],i=a[0],s=a[1],o=a[2];if(i===t&&s===e)return{glType:r,name:o}}return null}},KcFQ:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var a,i=r("JX7q"),n=r("dI71"),s=r("73Rc"),o=r("98Cc"),u="EXT_color_buffer_float",c=((a={})[s.a.DEPTH_COMPONENT16]={bpp:2},a[s.a.DEPTH_COMPONENT24]={gl2:!0,bpp:3},a[s.a.DEPTH_COMPONENT32F]={gl2:!0,bpp:4},a[s.a.STENCIL_INDEX8]={bpp:1},a[s.a.DEPTH_STENCIL]={bpp:4},a[s.a.DEPTH24_STENCIL8]={gl2:!0,bpp:4},a[s.a.DEPTH32F_STENCIL8]={gl2:!0,bpp:5},a[s.a.RGBA4]={bpp:2},a[s.a.RGB565]={bpp:2},a[s.a.RGB5_A1]={bpp:2},a[s.a.R8]={gl2:!0,bpp:1},a[s.a.R8UI]={gl2:!0,bpp:1},a[s.a.R8I]={gl2:!0,bpp:1},a[s.a.R16UI]={gl2:!0,bpp:2},a[s.a.R16I]={gl2:!0,bpp:2},a[s.a.R32UI]={gl2:!0,bpp:4},a[s.a.R32I]={gl2:!0,bpp:4},a[s.a.RG8]={gl2:!0,bpp:2},a[s.a.RG8UI]={gl2:!0,bpp:2},a[s.a.RG8I]={gl2:!0,bpp:2},a[s.a.RG16UI]={gl2:!0,bpp:4},a[s.a.RG16I]={gl2:!0,bpp:4},a[s.a.RG32UI]={gl2:!0,bpp:8},a[s.a.RG32I]={gl2:!0,bpp:8},a[s.a.RGB8]={gl2:!0,bpp:3},a[s.a.RGBA8]={gl2:!0,bpp:4},a[s.a.RGB10_A2]={gl2:!0,bpp:4},a[s.a.RGBA8UI]={gl2:!0,bpp:4},a[s.a.RGBA8I]={gl2:!0,bpp:4},a[s.a.RGB10_A2UI]={gl2:!0,bpp:4},a[s.a.RGBA16UI]={gl2:!0,bpp:8},a[s.a.RGBA16I]={gl2:!0,bpp:8},a[s.a.RGBA32I]={gl2:!0,bpp:16},a[s.a.RGBA32UI]={gl2:!0,bpp:16},a[s.a.R16F]={gl2:u,bpp:2},a[s.a.RG16F]={gl2:u,bpp:4},a[s.a.RGBA16F]={gl2:u,bpp:8},a[s.a.R32F]={gl2:u,bpp:4},a[s.a.RG32F]={gl2:u,bpp:8},a[s.a.RGBA32F]={gl2:u,bpp:16},a[s.a.R11F_G11F_B10F]={gl2:u,bpp:4},a),f=r("lHlH"),h=r("Iq2B");var l=function(t){function e(e,r){var a;return void 0===r&&(r={}),(a=t.call(this,e,r)||this).initialize(r),Object.seal(Object(i.a)(a)),a}Object(n.a)(e,t),e.isSupported=function(t,e){var r=(void 0===e?{format:null}:e).format;return!r||function(t,e,r){var a=r[e];if(!a)return!1;var i=Object(f.h)(t)&&a.gl2||a.gl1;return"string"==typeof i?t.getExtension(i):i}(t,r,c)},e.getSamplesForFormat=function(t,e){var r=e.format;return t.getInternalformatParameter(s.a.RENDERBUFFER,r,s.a.SAMPLES)};var r=e.prototype;return r.initialize=function(t){var e=t.format,r=t.width,a=void 0===r?1:r,i=t.height,n=void 0===i?1:i,o=t.samples,u=void 0===o?0:o;return Object(h.a)(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(s.a.RENDERBUFFER,this.handle),0!==u&&Object(f.h)(this.gl)?this.gl.renderbufferStorageMultisample(s.a.RENDERBUFFER,u,e,a,n):this.gl.renderbufferStorage(s.a.RENDERBUFFER,e,a,n),this.format=e,this.width=a,this.height=n,this.samples=u,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*c[this.format].bpp),this},r.resize=function(t){var e=t.width,r=t.height;return e!==this.width||r!==this.height?this.initialize({width:e,height:r,format:this.format,samples:this.samples}):this},r._createHandle=function(){return this.gl.createRenderbuffer()},r._deleteHandle=function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()},r._bindHandle=function(t){this.gl.bindRenderbuffer(s.a.RENDERBUFFER,t)},r._syncHandle=function(t){this.format=this.getParameter(s.a.RENDERBUFFER_INTERNAL_FORMAT),this.width=this.getParameter(s.a.RENDERBUFFER_WIDTH),this.height=this.getParameter(s.a.RENDERBUFFER_HEIGHT),this.samples=this.getParameter(s.a.RENDERBUFFER_SAMPLES)},r._getParameter=function(t){return this.gl.bindRenderbuffer(s.a.RENDERBUFFER,this.handle),this.gl.getRenderbufferParameter(s.a.RENDERBUFFER,t)},e}(o.a)},RHh3:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var a=r("s4An");function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function n(t,e,r){return(n=i()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var n=new(Function.bind.apply(t,i));return r&&Object(a.a)(n,r.prototype),n}).apply(null,arguments)}},UBYz:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return s})),r.d(e,"d",(function(){return o}));r("PF2M"),r("IZzc");var a=r("73Rc");function i(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return a.a.FLOAT;case Uint16Array:return a.a.UNSIGNED_SHORT;case Uint32Array:return a.a.UNSIGNED_INT;case Uint8Array:case Uint8ClampedArray:return a.a.UNSIGNED_BYTE;case Int8Array:return a.a.BYTE;case Int16Array:return a.a.SHORT;case Int32Array:return a.a.INT;default:throw new Error("Failed to deduce GL constant from typed array")}}function n(t,e){var r=(void 0===e?{}:e).clamped,i=void 0===r||r;switch(t){case a.a.FLOAT:return Float32Array;case a.a.UNSIGNED_SHORT:case a.a.UNSIGNED_SHORT_5_6_5:case a.a.UNSIGNED_SHORT_4_4_4_4:case a.a.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case a.a.UNSIGNED_INT:return Uint32Array;case a.a.UNSIGNED_BYTE:return i?Uint8ClampedArray:Uint8Array;case a.a.BYTE:return Int8Array;case a.a.SHORT:return Int16Array;case a.a.INT:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function s(t){var e=t.data,r=t.width,a=t.height,i=t.bytesPerPixel,n=void 0===i?4:i,s=t.temp,o=r*n;s=s||new Uint8Array(o);for(var u=0;u<a/2;++u){var c=u*o,f=(a-u-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,f,f+o),e.set(s,f)}}function o(t){for(var e=t.data,r=t.width,a=t.height,i=Math.round(r/2),n=Math.round(a/2),s=new Uint8Array(i*n*4),o=0;o<n;o++)for(var u=0;u<i;u++)for(var c=0;c<4;c++)s[4*(o*i+u)+c]=e[4*(2*o*r+2*u)+c];return{data:s,width:i,height:n}}},WFpA:function(t,e,r){"use strict";r.d(e,"a",(function(){return z}));var a,i=r("JX7q"),n=r("dI71"),s=r("73Rc"),o=r("98Cc"),u=r("rfXe"),c=r("mECX"),f=(r("PF2M"),r("IZzc"),r("lHlH")),h=r("KcFQ"),l=r("Iq2B"),d=((a={})[s.a.FLOAT]=I.bind(null,"uniform1fv",v,1,B),a[s.a.FLOAT_VEC2]=I.bind(null,"uniform2fv",v,2,B),a[s.a.FLOAT_VEC3]=I.bind(null,"uniform3fv",v,3,B),a[s.a.FLOAT_VEC4]=I.bind(null,"uniform4fv",v,4,B),a[s.a.INT]=I.bind(null,"uniform1iv",A,1,B),a[s.a.INT_VEC2]=I.bind(null,"uniform2iv",A,2,B),a[s.a.INT_VEC3]=I.bind(null,"uniform3iv",A,3,B),a[s.a.INT_VEC4]=I.bind(null,"uniform4iv",A,4,B),a[s.a.BOOL]=I.bind(null,"uniform1iv",A,1,B),a[s.a.BOOL_VEC2]=I.bind(null,"uniform2iv",A,2,B),a[s.a.BOOL_VEC3]=I.bind(null,"uniform3iv",A,3,B),a[s.a.BOOL_VEC4]=I.bind(null,"uniform4iv",A,4,B),a[s.a.FLOAT_MAT2]=I.bind(null,"uniformMatrix2fv",v,4,N),a[s.a.FLOAT_MAT3]=I.bind(null,"uniformMatrix3fv",v,9,N),a[s.a.FLOAT_MAT4]=I.bind(null,"uniformMatrix4fv",v,16,N),a[s.a.SAMPLER_2D]=O,a[s.a.SAMPLER_CUBE]=O,a[s.a.UNSIGNED_INT]=I.bind(null,"uniform1uiv",T,1,B),a[s.a.UNSIGNED_INT_VEC2]=I.bind(null,"uniform2uiv",T,2,B),a[s.a.UNSIGNED_INT_VEC3]=I.bind(null,"uniform3uiv",T,3,B),a[s.a.UNSIGNED_INT_VEC4]=I.bind(null,"uniform4uiv",T,4,B),a[s.a.FLOAT_MAT2x3]=I.bind(null,"uniformMatrix2x3fv",v,6,N),a[s.a.FLOAT_MAT2x4]=I.bind(null,"uniformMatrix2x4fv",v,8,N),a[s.a.FLOAT_MAT3x2]=I.bind(null,"uniformMatrix3x2fv",v,6,N),a[s.a.FLOAT_MAT3x4]=I.bind(null,"uniformMatrix3x4fv",v,12,N),a[s.a.FLOAT_MAT4x2]=I.bind(null,"uniformMatrix4x2fv",v,8,N),a[s.a.FLOAT_MAT4x3]=I.bind(null,"uniformMatrix4x3fv",v,12,N),a[s.a.SAMPLER_2D]=O,a[s.a.SAMPLER_CUBE]=O,a[s.a.SAMPLER_3D]=O,a[s.a.SAMPLER_2D_SHADOW]=O,a[s.a.SAMPLER_2D_ARRAY]=O,a[s.a.SAMPLER_2D_ARRAY_SHADOW]=O,a[s.a.SAMPLER_CUBE_SHADOW]=O,a[s.a.INT_SAMPLER_2D]=O,a[s.a.INT_SAMPLER_3D]=O,a[s.a.INT_SAMPLER_CUBE]=O,a[s.a.INT_SAMPLER_2D_ARRAY]=O,a[s.a.UNSIGNED_INT_SAMPLER_2D]=O,a[s.a.UNSIGNED_INT_SAMPLER_3D]=O,a[s.a.UNSIGNED_INT_SAMPLER_CUBE]=O,a[s.a.UNSIGNED_INT_SAMPLER_2D_ARRAY]=O,a),g={},E={},b={},m=[0];function _(t,e,r,a){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(m[0]=t,t=m);var i=t.length;if(i%e&&f.i.warn("Uniform size should be multiples of "+e,t)(),t instanceof r)return t;var n=a[i];n||(n=new r(i),a[i]=n);for(var s=0;s<i;s++)n[s]=t[s];return n}function v(t,e){return _(t,e,Float32Array,g)}function A(t,e){return _(t,e,Int32Array,E)}function T(t,e){return _(t,e,Uint32Array,b)}function p(t,e,r){var a=d[r.type];if(!a)throw new Error("Unknown GLSL uniform type "+r.type);return a().bind(null,t,e)}function R(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};var e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name "+t);return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function y(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;for(var e=Math.min(t.length,16),r=0;r<e;++r)if(!Number.isFinite(t[r]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof u.a||(t instanceof h.a||t instanceof c.a&&Boolean(t.texture))))}function F(t,e,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(t[e])for(var a=t[e],i=0,n=r.length;i<n;++i)a[i]=r[i];else t[e]=r.slice();else t[e]=r}function O(){var t=null;return function(e,r,a){var i=t!==a;return i&&(e.uniform1i(r,a),t=a),i}}function I(t,e,r,a){var i=null,n=null;return function(s,o,u){var c=e(u,r),f=c.length,h=!1;if(null===i)i=new Float32Array(f),n=f,h=!0;else{Object(l.a)(n===f,"Uniform length cannot change.");for(var d=0;d<f;++d)if(c[d]!==i[d]){h=!0;break}}return h&&(a(s,t,o,c),i.set(c)),h}}function B(t,e,r,a){t[e](r,a)}function N(t,e,r,a){t[e](r,!1,a)}function L(t,e){void 0===e&&(e="unnamed");var r=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return r?r[1]:e}function U(t,e,r,a){for(var i=t.split(/\r?\n/),n={},s={},o=a||L(e)||"(unnamed)",u=function(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(r)+" shader "+o,c=0;c<i.length;c++){var f=i[c];if(!(f.length<=1)){var h=f.split(":"),l=h[0],d=parseInt(h[2],10);if(isNaN(d))throw new Error("GLSL compilation error in "+u+": "+t);"WARNING"!==l?n[d]=f:s[d]=f}}var g=function(t,e,r){void 0===e&&(e=1);void 0===r&&(r=": ");var a=t.split(/\r?\n/),i=String(a.length+e-1).length;return a.map((function(t,a){var n=String(a+e),s=n.length;return M(n,i-s)+r+t}))}(e);return{shaderName:u,errors:S(n,g),warnings:S(s,g)}}function S(t,e){for(var r="",a=0;a<e.length;a++){var i=e[a];if((t[a+3]||t[a+2]||t[a+1])&&(r+=i+"\n",t[a+1])){var n=t[a+1],s=n.split(":",3),o=s[0],u=parseInt(s[1],10)||0;r+=M("^^^ "+o+": "+n.substring(s.join(":").length+1).trim()+"\n\n",u)}}return r}function M(t,e){for(var r="",a=0;a<e;++a)r+=" ";return""+r+t}var x=r("BunF"),w=function(t){function e(r,a){var i;Object(f.b)(r),Object(l.a)("string"==typeof a.source,"Shader: GLSL source code must be a JavaScript string");var n=L(a.source,null)||a.id||Object(x.c)("unnamed "+e.getTypeName(a.shaderType));return(i=t.call(this,r,{id:n})||this).shaderType=a.shaderType,i.source=a.source,i.initialize(a),i}Object(n.a)(e,t),e.getTypeName=function(t){switch(t){case s.a.VERTEX_SHADER:return"vertex-shader";case s.a.FRAGMENT_SHADER:return"fragment-shader";default:return Object(l.a)(!1),"unknown"}};var r=e.prototype;return r.initialize=function(t){var e=t.source,r=L(e,null);r&&(this.id=Object(x.c)(r)),this._compile(e)},r.getParameter=function(t){return this.gl.getShaderParameter(this.handle,t)},r.toString=function(){return e.getTypeName(this.shaderType)+":"+this.id},r.getName=function(){return L(this.source)||"unnamed-shader"},r.getSource=function(){return this.gl.getShaderSource(this.handle)},r.getTranslatedSource=function(){var t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"},r._compile=function(t){if(void 0===t&&(t=this.source),t.startsWith("#version ")||(t="#version 100\n"+t),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(s.a.COMPILE_STATUS)){var e=U(this.gl.getShaderInfoLog(this.handle),this.source,this.shaderType,this.id),r=e.shaderName,a=e.errors,i=e.warnings;throw f.i.error("GLSL compilation errors in "+r+"\n"+a)(),f.i.warn("GLSL compilation warnings in "+r+"\n"+i)(),new Error("GLSL compilation errors in "+r)}},r._deleteHandle=function(){this.gl.deleteShader(this.handle)},r._getOptsFromHandle=function(){return{type:this.getParameter(s.a.SHADER_TYPE),source:this.getSource()}},e}(o.a),C=function(t){function e(e,r){return"string"==typeof r&&(r={source:r}),t.call(this,e,Object.assign({},r,{shaderType:s.a.VERTEX_SHADER}))||this}return Object(n.a)(e,t),e.prototype._createHandle=function(){return this.gl.createShader(s.a.VERTEX_SHADER)},e}(w),P=function(t){function e(e,r){return"string"==typeof r&&(r={source:r}),t.call(this,e,Object.assign({},r,{shaderType:s.a.FRAGMENT_SHADER}))||this}return Object(n.a)(e,t),e.prototype._createHandle=function(){return this.gl.createShader(s.a.FRAGMENT_SHADER)},e}(w),D=(r("ToJy"),r("YJ55")),j=r("Ifu7"),H=function(){function t(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}var e=t.prototype;return e.getAttributeInfo=function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null},e.getAttributeLocation=function(t){var e=this.getAttributeInfo(t);return e?e.location:-1},e.getAttributeAccessor=function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null},e.getVaryingInfo=function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null},e.getVaryingIndex=function(t){var e=this.getVaryingInfo();return e?e.location:-1},e.getVaryingAccessor=function(t){var e=this.getVaryingInfo();return e?e.accessor:null},e._readAttributesFromProgram=function(t){for(var e=t.gl,r=e.getProgramParameter(t.handle,e.ACTIVE_ATTRIBUTES),a=0;a<r;a++){var i=e.getActiveAttrib(t.handle,a),n=i.name,s=i.type,o=i.size,u=e.getAttribLocation(t.handle,n);u>=0&&this._addAttribute(u,n,s,o)}this.attributeInfos.sort((function(t,e){return t.location-e.location}))},e._readVaryingsFromProgram=function(t){var e=t.gl;if(Object(f.h)(e)){for(var r=e.getProgramParameter(t.handle,e.TRANSFORM_FEEDBACK_VARYINGS),a=0;a<r;a++){var i=e.getTransformFeedbackVarying(t.handle,a),n=i.name,s=i.type,o=i.size;this._addVarying(a,n,s,o)}this.varyingInfos.sort((function(t,e){return t.location-e.location}))}},e._addAttribute=function(t,e,r,a){var i=Object(j.a)(r),n={type:i.type,size:a*i.components};this._inferProperties(t,e,n);var s={location:t,name:e,accessor:new D.a(n)};this.attributeInfos.push(s),this.attributeInfosByLocation[t]=s,this.attributeInfosByName[s.name]=s},e._inferProperties=function(t,e,r){/instance/i.test(e)&&(r.divisor=1)},e._addVarying=function(t,e,r,a){var i=Object(j.a)(r),n=i.type,s=i.components,o={location:t,name:e,accessor:new D.a({type:n,size:a*s})};this.varyingInfos.push(o),this.varyingInfosByName[o.name]=o},t}(),G=r("62vL");function X(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var k=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],z=function(t){function e(e,r){var a;return void 0===r&&(r={}),(a=t.call(this,e,r)||this).stubRemovedMethods("Program","v6.0",k),a._isCached=!1,a.initialize(r),Object.seal(Object(i.a)(a)),a._setId(r.id),a}Object(n.a)(e,t);var r=e.prototype;return r.initialize=function(t){void 0===t&&(t={});var e=t,r=e.hash,a=e.vs,i=e.fs,n=e.varyings,s=e.bufferMode,o=void 0===s?35981:s;return this.hash=r||"",this.vs="string"==typeof a?new C(this.gl,{id:t.id+"-vs",source:a}):a,this.fs="string"==typeof i?new P(this.gl,{id:t.id+"-fs",source:i}):i,Object(l.a)(this.vs instanceof C),Object(l.a)(this.fs instanceof P),this.uniforms={},this._textureUniforms={},n&&n.length>0&&(Object(f.a)(this.gl),this.varyings=n,this.gl2.transformFeedbackVaryings(this.handle,n,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new H(this),this.setProps(t)},r.delete=function(e){return void 0===e&&(e={}),this._isCached?this:t.prototype.delete.call(this,e)},r.setProps=function(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this},r.draw=function(t){var e=this,r=t.logPriority,a=t.drawMode,i=void 0===a?s.a.TRIANGLES:a,n=t.vertexCount,o=t.offset,u=void 0===o?0:o,c=t.start,h=t.end,d=t.isIndexed,g=void 0!==d&&d,E=t.indexType,b=void 0===E?s.a.UNSIGNED_SHORT:E,m=t.instanceCount,_=void 0===m?0:m,v=t.isInstanced,A=void 0===v?_>0:v,T=t.vertexArray,p=void 0===T?null:T,R=t.transformFeedback,y=t.framebuffer,F=t.parameters,O=void 0===F?{}:F,I=t.uniforms,B=t.samplers;if((I||B)&&(f.i.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(I||{})),f.i.priority>=r){var N=y?y.id:"default",L="mode="+Object(G.a)(this.gl,i)+" verts="+n+" instances="+_+" indexType="+Object(G.a)(this.gl,b)+" isInstanced="+A+" isIndexed="+g+" Framebuffer="+N;f.i.log(r,L)()}return Object(l.a)(p),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===n||A&&0===_)&&(p.bindForDraw(n,_,(function(){if(void 0!==y&&(O=Object.assign({},O,{framebuffer:y})),R){var t=Object(j.c)(i);R.begin(t)}e._bindTextures(),Object(f.n)(e.gl,O,(function(){g&&A?e.gl2.drawElementsInstanced(i,n,b,u,_):g&&Object(f.h)(e.gl)&&!isNaN(c)&&!isNaN(h)?e.gl2.drawRangeElements(i,c,h,n,b,u):g?e.gl.drawElements(i,n,b,u):A?e.gl2.drawArraysInstanced(i,u,n,_):e.gl.drawArrays(i,u,n)})),R&&R.end()})),!0)},r.setUniforms=function(t){for(var e in void 0===t&&(t={}),f.i.priority>=2&&function(t,e,r){for(var a in t){var i=t[a];if((!r||Boolean(r[a]))&&!y(i))throw e=e?e+" ":"",console.error(e+" Bad uniform "+a,i),new Error(e+" Bad uniform "+a)}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle),t){var r=t[e],a=this._uniformSetters[e];if(a){var i=r,n=!1;if(i instanceof c.a&&(i=i.texture),i instanceof u.a)if(n=this.uniforms[e]!==r){void 0===a.textureIndex&&(a.textureIndex=this._textureIndexCounter++);var s=i,o=a.textureIndex;s.bind(o),i=o,this._textureUniforms[e]=s}else i=a.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(a(i)||n)&&F(this.uniforms,e,r)}}return this},r._areTexturesRenderable=function(){var t=!0;for(var e in this._textureUniforms){var r=this._textureUniforms[e];r.update(),t=t&&r.loaded}return t},r._bindTextures=function(){for(var t in this._textureUniforms){var e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}},r._createHandle=function(){return this.gl.createProgram()},r._deleteHandle=function(){this.gl.deleteProgram(this.handle)},r._getOptionsFromHandle=function(t){for(var e,r={},a=X(this.gl.getAttachedShaders(t));!(e=a()).done;){var i=e.value;switch(this.gl.getShaderParameter(this.handle,s.a.SHADER_TYPE)){case s.a.VERTEX_SHADER:r.vs=new C({handle:i});break;case s.a.FRAGMENT_SHADER:r.fs=new P({handle:i})}}return r},r._getParameter=function(t){return this.gl.getProgramParameter(this.handle,t)},r._setId=function(t){if(!t){var e=this._getName();this.id=Object(x.c)(e)}},r._getName=function(){var t=this.vs.getName()||this.fs.getName();return t=(t=t.replace(/shader/i,""))?t+"-program":"program"},r._compileAndLink=function(){var t=this.gl;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),f.i.time(4,"linkProgram for "+this._getName())(),t.linkProgram(this.handle),f.i.timeEnd(4,"linkProgram for "+this._getName())(),t.debug||f.i.level>0){if(!t.getProgramParameter(this.handle,t.LINK_STATUS))throw new Error("Error linking: "+t.getProgramInfoLog(this.handle));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,t.VALIDATE_STATUS))throw new Error("Error validating: "+t.getProgramInfoLog(this.handle))}},r._readUniformLocationsFromLinkedProgram=function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(s.a.ACTIVE_UNIFORMS);for(var e=0;e<this._uniformCount;e++){var r=this.gl.getActiveUniform(this.handle,e),a=R(r.name).name,i=t.getUniformLocation(this.handle,a);if(this._uniformSetters[a]=p(t,i,r),r.size>1)for(var n=0;n<r.size;n++)i=t.getUniformLocation(this.handle,a+"["+n+"]"),this._uniformSetters[a+"["+n+"]"]=p(t,i,r)}this._textureIndexCounter=0},r.getActiveUniforms=function(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)},r.getUniformBlockIndex=function(t){return this.gl2.getUniformBlockIndex(this.handle,t)},r.getActiveUniformBlockParameter=function(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)},r.uniformBlockBinding=function(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)},e}(o.a)},WY7U:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var a=r("HaE+"),i=r("JX7q"),n=r("dI71"),s=r("o0o1"),o=r.n(s),u=r("73Rc"),c=r("lHlH"),f=r("rfXe"),h=[u.a.TEXTURE_CUBE_MAP_POSITIVE_X,u.a.TEXTURE_CUBE_MAP_NEGATIVE_X,u.a.TEXTURE_CUBE_MAP_POSITIVE_Y,u.a.TEXTURE_CUBE_MAP_NEGATIVE_Y,u.a.TEXTURE_CUBE_MAP_POSITIVE_Z,u.a.TEXTURE_CUBE_MAP_NEGATIVE_Z],l=function(t){function e(e,r){var a;return void 0===r&&(r={}),Object(c.b)(e),(a=t.call(this,e,Object.assign({},r,{target:u.a.TEXTURE_CUBE_MAP}))||this).initialize(r),Object.seal(Object(i.a)(a)),a}Object(n.a)(e,t);var r=e.prototype;return r.initialize=function(t){var e=this;void 0===t&&(t={});var r=t,a=r.mipmaps,i=void 0===a||a,n=r.parameters,s=void 0===n?{}:n;return this.opts=t,this.setCubeMapImageData(t).then((function(){e.loaded=!0,i&&e.generateMipmap(t),e.setParameters(s)})),this},r.subImage=function(t){var e=t.face,r=t.data,a=t.x,i=void 0===a?0:a,n=t.y,s=void 0===n?0:n,o=t.mipmapLevel,u=void 0===o?0:o;return this._subImage({target:e,data:r,x:i,y:s,mipmapLevel:u})},r.setCubeMapImageData=function(){var t=Object(a.a)(o.a.mark((function t(e){var r,a,i,n,s,f,l,d,g,E,b,m,_,v=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.width,a=e.height,i=e.pixels,n=e.data,s=e.border,f=void 0===s?0:s,l=e.format,d=void 0===l?u.a.RGBA:l,g=e.type,E=void 0===g?u.a.UNSIGNED_BYTE:g,b=this.gl,m=i||n,t.next=5,Promise.all(h.map((function(t){var e=m[t];return Promise.all(Array.isArray(e)?e:[e])})));case 5:_=t.sent,this.bind(),h.forEach((function(t,e){_[e].length>1&&!1!==v.opts.mipmaps&&c.i.warn(v.id+" has mipmap and multiple LODs.")(),_[e].forEach((function(e,i){r&&a?b.texImage2D(t,i,d,r,a,f,d,E,e):b.texImage2D(t,i,d,d,E,e)}))})),this.unbind();case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setImageDataForFace=function(t){var e=this,r=t.face,a=t.width,i=t.height,n=t.pixels,s=t.data,o=t.border,c=void 0===o?0:o,f=t.format,h=void 0===f?u.a.RGBA:f,l=t.type,d=void 0===l?u.a.UNSIGNED_BYTE:l,g=this.gl,E=n||s;return this.bind(),E instanceof Promise?E.then((function(a){return e.setImageDataForFace(Object.assign({},t,{face:r,data:a,pixels:a}))})):this.width||this.height?g.texImage2D(r,0,h,a,i,c,h,d,E):g.texImage2D(r,0,h,h,d,E),this},e}(f.a);l.FACES=h},WrWi:function(t,e,r){"use strict";r.d(e,"a",(function(){return T}));var a=r("73Rc"),i=r("lHlH"),n=r("YJ55"),s=r("3LCa"),o=r("vuIU"),u=r("JX7q"),c=r("dI71"),f=(r("PF2M"),r("IZzc"),r("98Cc")),h=null;function l(t,e){var r;return new t((r=t.BYTES_PER_ELEMENT*e,(!h||h.byteLength<r)&&(h=new ArrayBuffer(r)),h),0,e)}var d=r("Iq2B"),g=r("W7fB"),E=r("o7VR"),b=r("KFwR");var m=function(t){function e(e,r){var a;void 0===r&&(r={});var i=r.id||r.program&&r.program.id;return(a=t.call(this,e,Object.assign({},r,{id:i}))||this).buffer=null,a.bufferValue=null,a.isDefaultArray=r.isDefaultArray||!1,a.gl2=e,a.initialize(r),Object.seal(Object(u.a)(a)),a}Object(c.a)(e,t),e.isSupported=function(t,e){return void 0===e&&(e={}),!e.constantAttributeZero||(Object(i.h)(t)||"Chrome"===function(t){if(!t&&!Object(E.a)())return"Node";if(Object(b.a)(t))return"Electron";var e="undefined"!=typeof navigator?navigator:{},r=t||e.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";var a=-1!==r.indexOf("MSIE "),i=-1!==r.indexOf("Trident/");return a||i?"IE":g.b.chrome?"Chrome":g.b.safari?"Safari":g.b.mozInnerScreenX?"Firefox":"Unknown"}())},e.getDefaultArray=function(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new e(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray},e.getMaxAttributes=function(t){return e.MAX_ATTRIBUTES=e.MAX_ATTRIBUTES||t.getParameter(t.MAX_VERTEX_ATTRIBS),e.MAX_ATTRIBUTES},e.setConstant=function(t,r,a){switch(a.constructor){case Float32Array:e._setConstantFloatArray(t,r,a);break;case Int32Array:e._setConstantIntArray(t,r,a);break;case Uint32Array:e._setConstantUintArray(t,r,a);break;default:Object(d.a)(!1)}};var r=e.prototype;return r.delete=function(){return t.prototype.delete.call(this),this.buffer&&this.buffer.delete(),this},r.initialize=function(t){return void 0===t&&(t={}),this.setProps(t)},r.setProps=function(t){return this},r.setElementBuffer=function(t,e){var r=this;return void 0===t&&(t=null),void 0===e&&(e={}),Object(d.a)(!t||t.target===a.a.ELEMENT_ARRAY_BUFFER,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((function(){r.gl.bindBuffer(a.a.ELEMENT_ARRAY_BUFFER,t?t.handle:null)})),this},r.setBuffer=function(t,e,r){if(e.target===a.a.ELEMENT_ARRAY_BUFFER)return this.setElementBuffer(e,r);var n=r.size,s=r.type,o=r.stride,u=r.offset,c=r.normalized,f=r.integer,h=r.divisor,l=this.gl,g=this.gl2;return t=Number(t),this.bind((function(){l.bindBuffer(l.ARRAY_BUFFER,e.handle),f?(Object(d.a)(Object(i.h)(l)),g.vertexAttribIPointer(t,n,s,o,u)):l.vertexAttribPointer(t,n,s,c,o,u),l.enableVertexAttribArray(t),g.vertexAttribDivisor(t,h||0)})),this},r.enable=function(t,r){var a=this;return void 0===r&&(r=!0),!r&&0===t&&!e.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind((function(){return r?a.gl.enableVertexAttribArray(t):a.gl.disableVertexAttribArray(t)}))),this},r.getConstantBuffer=function(t,e){var r=this._normalizeConstantArrayValue(e),a=r.byteLength*t,i=r.length*t,n=!this.buffer;if(this.buffer=this.buffer||new s.a(this.gl,a),n=(n=n||this.buffer.reallocate(a))||!this._compareConstantArrayValues(r,this.bufferValue)){var o=l(e.constructor,i);!function(t){for(var e=t.target,r=t.source,a=t.start,i=void 0===a?0:a,n=t.count,s=void 0===n?1:n,o=r.length,u=s*o,c=0,f=i;c<o;c++)e[f++]=r[c];for(;c<u;)c<u-c?(e.copyWithin(i+c,i,i+c),c*=2):(e.copyWithin(i+c,i,i+u-c),c=u)}({target:o,source:r,start:0,count:i}),this.buffer.subData(o),this.bufferValue=e}return this.buffer},r._normalizeConstantArrayValue=function(t){return Array.isArray(t)?new Float32Array(t):t},r._compareConstantArrayValues=function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0},e._setConstantFloatArray=function(t,e,r){switch(r.length){case 1:t.vertexAttrib1fv(e,r);break;case 2:t.vertexAttrib2fv(e,r);break;case 3:t.vertexAttrib3fv(e,r);break;case 4:t.vertexAttrib4fv(e,r);break;default:Object(d.a)(!1)}},e._setConstantIntArray=function(t,e,r){switch(Object(d.a)(Object(i.h)(t)),r.length){case 1:t.vertexAttribI1iv(e,r);break;case 2:t.vertexAttribI2iv(e,r);break;case 3:t.vertexAttribI3iv(e,r);break;case 4:t.vertexAttribI4iv(e,r);break;default:Object(d.a)(!1)}},e._setConstantUintArray=function(t,e,r){switch(Object(d.a)(Object(i.h)(t)),r.length){case 1:t.vertexAttribI1uiv(e,r);break;case 2:t.vertexAttribI2uiv(e,r);break;case 3:t.vertexAttribI3uiv(e,r);break;case 4:t.vertexAttribI4uiv(e,r);break;default:Object(d.a)(!1)}},r._createHandle=function(){return this.gl.createVertexArray()},r._deleteHandle=function(t){return this.gl2.deleteVertexArray(t),[this.elements]},r._bindHandle=function(t){this.gl2.bindVertexArray(t)},r._getParameter=function(t,e){var r=this,i=e.location;return Object(d.a)(Number.isFinite(i)),this.bind((function(){switch(t){case a.a.VERTEX_ATTRIB_ARRAY_POINTER:return r.gl.getVertexAttribOffset(i,t);default:return r.gl.getVertexAttrib(i,t)}}))},Object(o.a)(e,[{key:"MAX_ATTRIBUTES",get:function(){return e.getMaxAttributes(this.gl)}}]),e}(f.a),_=r("7rsd"),v=/^(.+)__LOCATION_([0-9]+)$/,A=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],T=function(){function t(t,e){void 0===e&&(e={});var r=e.id||e.program&&e.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new m(t),Object(_.a)(this,"VertexArray","v6.0",A),this.initialize(e),Object.seal(this)}var e=t.prototype;return e.delete=function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()},e.initialize=function(t){return void 0===t&&(t={}),this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)},e.reset=function(){this.elements=null,this.elementsAccessor=null;var t=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this},e.setProps=function(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this},e.clearDrawParams=function(){this.drawParams=null},e.getDrawParams=function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams},e.setAttributes=function(t){var e=this;return Object.assign(this.attributes,t),this.vertexArrayObject.bind((function(){for(var r in t){var i=t[r];e._setAttribute(r,i)}e.gl.bindBuffer(a.a.ARRAY_BUFFER,null)})),this},e.setElementBuffer=function(t,e){return void 0===t&&(t=null),void 0===e&&(e={}),this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this},e.setBuffer=function(t,e,r){if(void 0===r&&(r={}),e.target===a.a.ELEMENT_ARRAY_BUFFER)return this.setElementBuffer(e,r);var i=this._resolveLocationAndAccessor(t,e,e.accessor,r),n=i.location,s=i.accessor;return n>=0&&(this.values[n]=e,this.accessors[n]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(n,e,s)),this},e.setConstant=function(t,e,r){void 0===r&&(r={});var a=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},r)),i=a.location,n=a.accessor;return i>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[i]=e,this.accessors[i]=n,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this},e.unbindBuffers=function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.vertexArrayObject.setElementBuffer(null),t.buffer=t.buffer||new s.a(t.gl,{accessor:{size:4}});for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++)t.values[e]instanceof s.a&&(t.gl.disableVertexAttribArray(e),t.gl.bindBuffer(a.a.ARRAY_BUFFER,t.buffer.handle),t.gl.vertexAttribPointer(e,1,a.a.FLOAT,!1,0,0))})),this},e.bindBuffers=function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.setElementBuffer(t.elements);for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++){var r=t.values[e];r instanceof s.a&&t.setBuffer(e,r)}})),this},e.bindForDraw=function(t,e,r){var a,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(t,e),a=r()})),a},e._resolveLocationAndAccessor=function(t,e,r,a){var s=this,o={location:-1,accessor:null},u=this._getAttributeIndex(t),c=u.location,f=u.name;if(!Number.isFinite(c)||c<0)return this.unused[t]=e,i.i.once(3,(function(){return"unused value "+t+" in "+s.id}))(),o;var h=this._getAttributeInfo(f||c);if(!h)return o;var l=this.accessors[c]||{},g=n.a.resolve(h.accessor,l,r,a),E=g.size,b=g.type;return Object(d.a)(Number.isFinite(E)&&Number.isFinite(b)),{location:c,accessor:g}},e._getAttributeInfo=function(t){return this.configuration&&this.configuration.getAttributeInfo(t)},e._getAttributeIndex=function(t){var e=Number(t);if(Number.isFinite(e))return{location:e};var r=v.exec(t),a=r?r[1]:t,i=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(a)+i,name:a}:{location:-1}},e._setAttribute=function(t,e){if(e instanceof s.a)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof s.a){var r=e[0],a=e[1];this.setBuffer(t,r,a)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){var i=e;this.setConstant(t,i)}else{if(!(e.buffer instanceof s.a))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var n=e;this.setBuffer(t,n.buffer,n)}},e._setConstantAttributes=function(t,e){var r=Math.max(0|t,0|e),a=this.values[0];ArrayBuffer.isView(a)&&this._setConstantAttributeZero(a,r);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)a=this.values[i],ArrayBuffer.isView(a)&&this._setConstantAttribute(i,a)},e._setConstantAttributeZero=function(t,e){if(m.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,t);else{var r=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}},e._setConstantAttribute=function(t,e){m.setConstant(this.gl,t,e)},e._updateDrawParams=function(){for(var t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t},e._updateDrawParamsForLocation=function(t,e){var r=this.values[e],a=this.accessors[e];if(r){var i=a.divisor>0;if(t.isInstanced=t.isInstanced||i,r instanceof s.a){var n=r;if(i){var o=n.getVertexCount(a);t.instanceCount=Math.min(t.instanceCount,o)}else{var u=n.getVertexCount(a);t.vertexCount=Math.min(t.vertexCount,u)}}}},e.setElements=function(t,e){return void 0===t&&(t=null),void 0===e&&(e={}),i.i.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)},t}()},YJ55:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var a=r("RHh3"),i=r("vuIU"),n=r("73Rc"),s=r("UBYz"),o=r("Iq2B"),u=r("/wHA"),c={offset:0,stride:0,type:n.a.FLOAT,size:1,divisor:0,normalized:!1,integer:!1},f={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},h=function(){function t(){for(var t=this,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];r.forEach((function(e){return t._assign(e)})),Object.freeze(this)}t.getBytesPerElement=function(t){return Object(s.c)(t.type||n.a.FLOAT).BYTES_PER_ELEMENT},t.getBytesPerVertex=function(t){return Object(o.a)(t.size),Object(s.c)(t.type||n.a.FLOAT).BYTES_PER_ELEMENT*t.size},t.resolve=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return Object(a.a)(t,[c].concat(r))};var e=t.prototype;return e.toString=function(){return JSON.stringify(this)},e._assign=function(t){return void 0===t&&(t={}),void 0!==(t=Object(u.a)("Accessor",t,f)).type&&(this.type=t.type,t.type!==n.a.INT&&t.type!==n.a.UNSIGNED_INT||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"==typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this},Object(i.a)(t,[{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}}]),t}()},dTJe:function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return c})),r.d(e,"a",(function(){return f}));var a=r("2aL3"),i=r("lHlH"),n=r("Iq2B");function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function u(t,e){return c(t,e)}function c(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return h(t,e)}))}function f(t){for(var e in t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},a.b)void 0===t.luma.caps[e]&&(t.luma.caps[e]=h(t,e));return t.luma.caps}function h(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){var r,o=a.b[e];Object(n.a)(o,e);var u=Object(i.h)(t)&&o[1]||o[0];if("function"==typeof u)r=u(t);else if(Array.isArray(u)){r=!0;for(var c,f=s(u);!(c=f()).done;){var h=c.value;r=r&&Boolean(t.getExtension(h))}}else"string"==typeof u?r=Boolean(t.getExtension(u)):"boolean"==typeof u?r=u:Object(n.a)(!1);return r}(t,e)),t.luma.caps[e]||i.i.log(2,"Feature: "+e+" not supported")(),t.luma.caps[e]}},kgJN:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return f}));var a=r("2urO"),i=r("WY7U"),n=r("viZF"),s=r("mECX"),o=r("73Rc"),u=r("Iq2B");function c(t,e){Object(u.a)(t instanceof a.a||t instanceof i.a||t instanceof n.a);var r=t.constructor,s=t.gl,o=t.width,c=t.height,f=t.format,h=t.type,l=t.dataFormat,d=t.border,g=t.mipmaps;return new r(s,Object.assign({width:o,height:c,format:f,type:h,dataFormat:l,border:d,mipmaps:g},e))}function f(t,e){var r,a=t.gl,i=t.width,n=t.height,u=t.id;return new s.a(a,Object.assign({},e,{id:"framebuffer-for-"+u,width:i,height:n,attachments:(r={},r[o.a.COLOR_ATTACHMENT0]=t,r)}))}},mECX:function(t,e,r){"use strict";r.d(e,"a",(function(){return _}));var a=r("vuIU"),i=r("JX7q"),n=r("dI71"),s=r("73Rc"),o=r("lHlH"),u=r("98Cc"),c=r("2urO"),f=r("KcFQ"),h=r("IObG"),l=r("EpVc"),d=r("dTJe"),g=r("62vL"),E=r("Iq2B");function b(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var _=function(t){function e(e,r){var a;return void 0===r&&(r={}),(a=t.call(this,e,r)||this).width=null,a.height=null,a.attachments={},a.readBuffer=s.a.COLOR_ATTACHMENT0,a.drawBuffers=[s.a.COLOR_ATTACHMENT0],a.ownResources=[],a.initialize(r),Object.seal(Object(i.a)(a)),a}Object(n.a)(e,t),e.isSupported=function(t,e){void 0===e&&(e={});var r=e,a=r.colorBufferFloat,i=r.colorBufferHalfFloat,n=!0;return a&&(n=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(n=n&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),n},e.getDefaultFramebuffer=function(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new e(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer};var r=e.prototype;return r.initialize=function(t){var e=t.width,r=void 0===e?1:e,a=t.height,i=void 0===a?1:a,n=t.attachments,s=void 0===n?null:n,o=t.color,u=void 0===o||o,c=t.depth,f=void 0===c||c,h=t.stencil,l=void 0!==h&&h,d=t.check,g=void 0===d||d,b=t.readBuffer,m=void 0===b?void 0:b,_=t.drawBuffers,v=void 0===_?void 0:_;if(Object(E.a)(r>=0&&i>=0,"Width and height need to be integers"),this.width=r,this.height=i,s)for(var A in s){var T=s[A];(Array.isArray(T)?T[0]:T).resize({width:r,height:i})}else s=this._createDefaultAttachments(u,f,l,r,i);this.update({clearAttachments:!0,attachments:s,readBuffer:m,drawBuffers:v}),s&&g&&this.checkStatus()},r.delete=function(){for(var e,r=b(this.ownResources);!(e=r()).done;){e.value.delete()}return t.prototype.delete.call(this),this},r.update=function(t){var e=t.attachments,r=void 0===e?{}:e,a=t.readBuffer,i=t.drawBuffers,n=t.clearAttachments,o=void 0!==n&&n,u=t.resizeAttachments,c=void 0===u||u;this.attach(r,{clearAttachments:o,resizeAttachments:c});var f=this.gl,h=f.bindFramebuffer(s.a.FRAMEBUFFER,this.handle);return a&&this._setReadBuffer(a),i&&this._setDrawBuffers(i),f.bindFramebuffer(s.a.FRAMEBUFFER,h||null),this},r.resize=function(t){void 0===t&&(t={});var e=t,r=e.width,a=e.height;if(null===this.handle)return Object(E.a)(void 0===r&&void 0===a),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var i in void 0===r&&(r=this.gl.drawingBufferWidth),void 0===a&&(a=this.gl.drawingBufferHeight),r!==this.width&&a!==this.height&&o.i.log(2,"Resizing framebuffer "+this.id+" to "+r+"x"+a)(),this.attachments)this.attachments[i].resize({width:r,height:a});return this.width=r,this.height=a,this},r.attach=function(t,e){var r=this,a=void 0===e?{}:e,i=a.clearAttachments,n=void 0!==i&&i,o=a.resizeAttachments,u=void 0===o||o,c={};n&&Object.keys(this.attachments).forEach((function(t){c[t]=null})),Object.assign(c,t);var h=this.gl.bindFramebuffer(s.a.FRAMEBUFFER,this.handle);for(var l in c){Object(E.a)(void 0!==l,"Misspelled framebuffer binding point?");var d=Number(l),g=c[d],b=g;if(b)if(b instanceof f.a)this._attachRenderbuffer({attachment:d,renderbuffer:b});else if(Array.isArray(g)){var m=g[0],_=g[1],v=void 0===_?0:_,A=g[2],T=void 0===A?0:A;b=m,this._attachTexture({attachment:d,texture:m,layer:v,level:T})}else this._attachTexture({attachment:d,texture:b,layer:0,level:0});else this._unattach(d);u&&b&&b.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(s.a.FRAMEBUFFER,h||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((function(t){return!r.attachments[t]})).forEach((function(t){delete r.attachments[t]}))},r.checkStatus=function(){var t=this.gl,e=this.getStatus();if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error(v(e));return this},r.getStatus=function(){var t=this.gl,e=t.bindFramebuffer(s.a.FRAMEBUFFER,this.handle),r=t.checkFramebufferStatus(s.a.FRAMEBUFFER);return t.bindFramebuffer(s.a.FRAMEBUFFER,e||null),r},r.clear=function(t){var e=this;void 0===t&&(t={});var r=t,a=r.color,i=r.depth,n=r.stencil,o=r.drawBuffers,u=void 0===o?[]:o,c=this.gl.bindFramebuffer(s.a.FRAMEBUFFER,this.handle);return(a||i||n)&&Object(h.a)(this.gl,{color:a,depth:i,stencil:n}),u.forEach((function(t,r){Object(h.b)(e.gl,{drawBuffer:r,value:t})})),this.gl.bindFramebuffer(s.a.FRAMEBUFFER,c||null),this},r.readPixels=function(t){return void 0===t&&(t={}),o.i.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null},r.readPixelsToBuffer=function(t){return void 0===t&&(t={}),o.i.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null},r.copyToDataUrl=function(t){return void 0===t&&(t={}),o.i.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null},r.copyToImage=function(t){return void 0===t&&(t={}),o.i.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null},r.copyToTexture=function(t){return void 0===t&&(t={}),o.i.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null},r.blit=function(t){return void 0===t&&(t={}),o.i.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null},r.invalidate=function(t){var e=t.attachments,r=void 0===e?[]:e,a=t.x,i=void 0===a?0:a,n=t.y,u=void 0===n?0:n,c=t.width,f=t.height,h=Object(o.a)(this.gl),l=h.bindFramebuffer(s.a.READ_FRAMEBUFFER,this.handle);return 0===i&&0===u&&void 0===c&&void 0===f?h.invalidateFramebuffer(s.a.READ_FRAMEBUFFER,r):h.invalidateFramebuffer(s.a.READ_FRAMEBUFFER,r,i,u,c,f),h.bindFramebuffer(s.a.READ_FRAMEBUFFER,l),this},r.getAttachmentParameter=function(t,e,r){var a=this._getAttachmentParameterFallback(e);return null===a&&(this.gl.bindFramebuffer(s.a.FRAMEBUFFER,this.handle),a=this.gl.getFramebufferAttachmentParameter(s.a.FRAMEBUFFER,t,e),this.gl.bindFramebuffer(s.a.FRAMEBUFFER,null)),r&&a>1e3&&(a=Object(g.a)(this.gl,a)),a},r.getAttachmentParameters=function(t,e,r){void 0===t&&(t=s.a.COLOR_ATTACHMENT0),void 0===r&&(r=this.constructor.ATTACHMENT_PARAMETERS||[]);for(var a,i={},n=b(r);!(a=n()).done;){var o=a.value;i[e?Object(g.a)(this.gl,o):o]=this.getAttachmentParameter(t,o,e)}return i},r.getParameters=function(t){void 0===t&&(t=!0);for(var e={},r=0,a=Object.keys(this.attachments);r<a.length;r++){var i=a[r],n=Number(i);e[t?Object(g.a)(this.gl,n):n]=this.getAttachmentParameters(n,t)}return e},r.show=function(){return"undefined"!=typeof window&&window.open(Object(l.a)(this),"luma-debug-texture"),this},r.log=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=""),t>o.i.level||"undefined"==typeof window)return this;e=e||"Framebuffer "+this.id;var r=Object(l.a)(this,{targetMaxHeight:100});return o.i.image({logLevel:t,message:e,image:r},e)(),this},r.bind=function(t){var e=(void 0===t?{}:t).target,r=void 0===e?s.a.FRAMEBUFFER:e;return this.gl.bindFramebuffer(r,this.handle),this},r.unbind=function(t){var e=(void 0===t?{}:t).target,r=void 0===e?s.a.FRAMEBUFFER:e;return this.gl.bindFramebuffer(r,null),this},r._createDefaultAttachments=function(t,e,r,a,i){var n,o=null;t&&((o=o||{})[s.a.COLOR_ATTACHMENT0]=new c.a(this.gl,{id:this.id+"-color0",pixels:null,format:s.a.RGBA,type:s.a.UNSIGNED_BYTE,width:a,height:i,mipmaps:!1,parameters:(n={},n[s.a.TEXTURE_MIN_FILTER]=s.a.LINEAR,n[s.a.TEXTURE_MAG_FILTER]=s.a.LINEAR,n[s.a.TEXTURE_WRAP_S]=s.a.CLAMP_TO_EDGE,n[s.a.TEXTURE_WRAP_T]=s.a.CLAMP_TO_EDGE,n)}),this.ownResources.push(o[s.a.COLOR_ATTACHMENT0]));return e&&r?((o=o||{})[s.a.DEPTH_STENCIL_ATTACHMENT]=new f.a(this.gl,{id:this.id+"-depth-stencil",format:s.a.DEPTH24_STENCIL8,width:a,height:111}),this.ownResources.push(o[s.a.DEPTH_STENCIL_ATTACHMENT])):e?((o=o||{})[s.a.DEPTH_ATTACHMENT]=new f.a(this.gl,{id:this.id+"-depth",format:s.a.DEPTH_COMPONENT16,width:a,height:i}),this.ownResources.push(o[s.a.DEPTH_ATTACHMENT])):r&&Object(E.a)(!1),o},r._unattach=function(t){var e=this.attachments[t];e&&(e instanceof f.a?this.gl.framebufferRenderbuffer(s.a.FRAMEBUFFER,t,s.a.RENDERBUFFER,null):this.gl.framebufferTexture2D(s.a.FRAMEBUFFER,t,s.a.TEXTURE_2D,null,0),delete this.attachments[t])},r._attachRenderbuffer=function(t){var e=t.attachment,r=void 0===e?s.a.COLOR_ATTACHMENT0:e,a=t.renderbuffer;this.gl.framebufferRenderbuffer(s.a.FRAMEBUFFER,r,s.a.RENDERBUFFER,a.handle),this.attachments[r]=a},r._attachTexture=function(t){var e=t.attachment,r=void 0===e?s.a.COLOR_ATTACHMENT0:e,a=t.texture,i=t.layer,n=t.level,u=this.gl;switch(u.bindTexture(a.target,a.handle),a.target){case s.a.TEXTURE_2D_ARRAY:case s.a.TEXTURE_3D:Object(o.a)(u).framebufferTextureLayer(s.a.FRAMEBUFFER,r,a.target,n,i);break;case s.a.TEXTURE_CUBE_MAP:var c=function(t){return t<s.a.TEXTURE_CUBE_MAP_POSITIVE_X?t+s.a.TEXTURE_CUBE_MAP_POSITIVE_X:t}(i);u.framebufferTexture2D(s.a.FRAMEBUFFER,r,c,a.handle,n);break;case s.a.TEXTURE_2D:u.framebufferTexture2D(s.a.FRAMEBUFFER,r,s.a.TEXTURE_2D,a.handle,n);break;default:Object(E.a)(!1,"Illegal texture type")}u.bindTexture(a.target,null),this.attachments[r]=a},r._setReadBuffer=function(t){var e=Object(o.e)(this.gl);e?e.readBuffer(t):Object(E.a)(t===s.a.COLOR_ATTACHMENT0||t===s.a.BACK,"Multiple render targets not supported"),this.readBuffer=t},r._setDrawBuffers=function(t){var e=this.gl,r=Object(o.a)(e);if(r)r.drawBuffers(t);else{var a=e.getExtension("WEBGL_draw_buffers");a?a.drawBuffersWEBGL(t):Object(E.a)(1===t.length&&(t[0]===s.a.COLOR_ATTACHMENT0||t[0]===s.a.BACK),"Multiple render targets not supported")}this.drawBuffers=t},r._getAttachmentParameterFallback=function(t){var e=Object(d.a)(this.gl);switch(t){case s.a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:return e.WEBGL2?null:0;case s.a.FRAMEBUFFER_ATTACHMENT_RED_SIZE:case s.a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:case s.a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:case s.a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:case s.a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:case s.a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:return e.WEBGL2?null:8;case s.a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:return e.WEBGL2?null:s.a.UNSIGNED_INT;case s.a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:return e.WEBGL2||e.EXT_sRGB?null:s.a.LINEAR;default:return null}},r._createHandle=function(){return this.gl.createFramebuffer()},r._deleteHandle=function(){this.gl.deleteFramebuffer(this.handle)},r._bindHandle=function(t){return this.gl.bindFramebuffer(s.a.FRAMEBUFFER,t)},Object(a.a)(e,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){var t=Object(o.a)(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){var t=Object(o.a)(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}},{key:"color",get:function(){return this.attachments[s.a.COLOR_ATTACHMENT0]||null}},{key:"texture",get:function(){return this.attachments[s.a.COLOR_ATTACHMENT0]||null}},{key:"depth",get:function(){return this.attachments[s.a.DEPTH_ATTACHMENT]||this.attachments[s.a.DEPTH_STENCIL_ATTACHMENT]||null}},{key:"stencil",get:function(){return this.attachments[s.a.STENCIL_ATTACHMENT]||this.attachments[s.a.DEPTH_STENCIL_ATTACHMENT]||null}}]),e}(u.a);function v(t){return(_.STATUS||{})[t]||"Framebuffer error "+t}var A=[s.a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME,s.a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE,s.a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING,s.a.FRAMEBUFFER_ATTACHMENT_RED_SIZE,s.a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE,s.a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE,s.a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE,s.a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE,s.a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE];_.ATTACHMENT_PARAMETERS=A},rfXe:function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var a=r("dI71"),i=r("73Rc"),n=r("lHlH"),s=r("QenK"),o=r("98Cc"),u=r("3LCa"),c=r("AFhB"),f=r("Iq2B"),h=r("BunF");function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var g=[i.a.LINEAR,i.a.NEAREST],E=s.global.WebGLBuffer||function(){},b=function(t){function e(e,r){var a,i=r.id,n=void 0===i?Object(h.c)("texture"):i,s=r.handle,o=r.target;return(a=t.call(this,e,{id:n,handle:s})||this).target=o,a.textureUnit=void 0,a.loaded=!1,a.width=void 0,a.height=void 0,a.depth=void 0,a.format=void 0,a.type=void 0,a.dataFormat=void 0,a.border=void 0,a.textureUnit=void 0,a.mipmaps=void 0,a}Object(a.a)(e,t),e.isSupported=function(t,e){void 0===e&&(e={});var r=e,a=r.format,i=r.linearFiltering,n=!0;return a&&(n=(n=n&&Object(c.d)(t,a))&&(!i||Object(c.e)(t,a))),n};var r=e.prototype;return r.toString=function(){return"Texture("+this.id+","+this.width+"x"+this.height+")"},r.initialize=function(t){var e=this;void 0===t&&(t={});var r=t.data;if(r instanceof Promise)return r.then((function(r){return e.initialize(Object.assign({},t,{pixels:r,data:r}))})),this;var a="undefined"!=typeof HTMLVideoElement&&r instanceof HTMLVideoElement;if(a&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",(function(){return e.initialize(t)})),this;var s=t,o=s.pixels,u=void 0===o?null:o,c=s.format,f=void 0===c?i.a.RGBA:c,h=s.border,l=void 0===h?0:h,d=s.recreate,g=void 0!==d&&d,E=s.parameters,b=void 0===E?{}:E,m=s.pixelStore,_=void 0===m?{}:m,v=s.textureUnit,A=void 0===v?void 0:v;r||(r=u);var T=t,p=T.width,R=T.height,y=T.dataFormat,F=T.type,O=T.compressed,I=void 0!==O&&O,B=T.mipmaps,N=void 0===B||B,L=t.depth,U=void 0===L?0:L,S=this._deduceParameters({format:f,type:F,dataFormat:y,compressed:I,data:r,width:p,height:R});return p=S.width,R=S.height,I=S.compressed,y=S.dataFormat,F=S.type,this.width=p,this.height=R,this.depth=U,this.format=f,this.type=F,this.dataFormat=y,this.border=l,this.textureUnit=A,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(i.a.TEXTURE0+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),N&&this._isNPOT()&&(n.i.warn("texture: "+this+" is Non-Power-Of-Two, disabling mipmaping")(),N=!1,this._updateForNPOT(b)),this.mipmaps=N,this.setImageData({data:r,width:p,height:R,depth:U,format:f,type:F,dataFormat:y,border:l,mipmaps:N,parameters:_,compressed:I}),N&&this.generateMipmap(),this.setParameters(b),g&&(this.data=r),a&&(this._video={video:r,parameters:b,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this},r.update=function(){if(this._video){var t=this._video,e=t.video,r=t.parameters;if(t.lastTime===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}},r.resize=function(t){var e=t.height,r=t.width,a=t.mipmaps,i=void 0!==a&&a;return r!==this.width||e!==this.height?this.initialize({width:r,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this},r.generateMipmap=function(t){var e=this;return void 0===t&&(t={}),this._isNPOT()?(n.i.warn("texture: "+this+" is Non-Power-Of-Two, disabling mipmaping")(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(n.n)(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this)},r.setImageData=function(t){this._trackDeallocatedMemory("Texture");var e=t.target,r=void 0===e?this.target:e,a=t.pixels,s=void 0===a?null:a,o=t.level,u=void 0===o?0:o,h=t.format,d=void 0===h?this.format:h,g=t.border,E=void 0===g?this.border:g,b=t.offset,m=void 0===b?0:b,_=t.parameters,v=void 0===_?{}:_,A=t.data,T=void 0===A?null:A,p=t.type,R=void 0===p?this.type:p,y=t.width,F=void 0===y?this.width:y,O=t.height,I=void 0===O?this.height:O,B=t.dataFormat,N=void 0===B?this.dataFormat:B,L=t.compressed,U=void 0!==L&&L;T||(T=s);var S=this._deduceParameters({format:d,type:R,dataFormat:N,compressed:U,data:T,width:F,height:I});R=S.type,N=S.dataFormat,U=S.compressed,F=S.width,I=S.height;var M=this.gl;M.bindTexture(this.target,this.handle);var x,w,C=this._getDataType({data:T,compressed:U});if(T=C.data,x=C.dataType,Object(n.n)(this.gl,v,(function(){switch(x){case"null":M.texImage2D(r,u,d,F,I,E,N,R,T);break;case"typed-array":M.texImage2D(r,u,d,F,I,E,N,R,T,m);break;case"buffer":(w=Object(n.a)(M)).bindBuffer(i.a.PIXEL_UNPACK_BUFFER,T.handle||T),w.texImage2D(r,u,d,F,I,E,N,R,m),w.bindBuffer(i.a.PIXEL_UNPACK_BUFFER,null);break;case"browser-object":Object(n.h)(M)?M.texImage2D(r,u,d,F,I,E,N,R,T):M.texImage2D(r,u,d,N,R,T);break;case"compressed":for(var t,e=l(T.entries());!(t=e()).done;){var a=t.value,s=a[0],o=a[1];M.compressedTexImage2D(r,s,o.format,o.width,o.height,E,o.data)}break;default:Object(f.a)(!1,"Unknown image data type")}})),T&&T.byteLength)this._trackAllocatedMemory(T.byteLength,"Texture");else{var P=c.a[this.dataFormat]||4,D=c.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*P*D,"Texture")}return this.loaded=!0,this},r.setSubImageData=function(t){var e=this,r=t.target,a=void 0===r?this.target:r,s=t.pixels,o=void 0===s?null:s,c=t.data,h=void 0===c?null:c,l=t.x,d=void 0===l?0:l,g=t.y,b=void 0===g?0:g,m=t.width,_=void 0===m?this.width:m,v=t.height,A=void 0===v?this.height:v,T=t.level,p=void 0===T?0:T,R=t.format,y=void 0===R?this.format:R,F=t.type,O=void 0===F?this.type:F,I=t.dataFormat,B=void 0===I?this.dataFormat:I,N=t.compressed,L=void 0!==N&&N,U=t.offset,S=void 0===U?0:U,M=t.border,x=(void 0===M&&this.border,t.parameters),w=void 0===x?{}:x,C=this._deduceParameters({format:y,type:O,dataFormat:B,compressed:L,data:h,width:_,height:A});if(O=C.type,B=C.dataFormat,L=C.compressed,_=C.width,A=C.height,Object(f.a)(0===this.depth,"texSubImage not supported for 3D textures"),h||(h=o),h&&h.data){var P=h;h=P.data,_=P.shape[0],A=P.shape[1]}h instanceof u.a&&(h=h.handle),this.gl.bindTexture(this.target,this.handle),Object(n.n)(this.gl,w,(function(){if(L)e.gl.compressedTexSubImage2D(a,p,d,b,_,A,y,h);else if(null===h)e.gl.texSubImage2D(a,p,d,b,_,A,B,O,null);else if(ArrayBuffer.isView(h))e.gl.texSubImage2D(a,p,d,b,_,A,B,O,h,S);else if(h instanceof E){var t=Object(n.a)(e.gl);t.bindBuffer(i.a.PIXEL_UNPACK_BUFFER,h),t.texSubImage2D(a,p,d,b,_,A,B,O,S),t.bindBuffer(i.a.PIXEL_UNPACK_BUFFER,null)}else if(Object(n.h)(e.gl)){Object(n.a)(e.gl).texSubImage2D(a,p,d,b,_,A,B,O,h)}else e.gl.texSubImage2D(a,p,d,b,B,O,h)})),this.gl.bindTexture(this.target,null)},r.copyFramebuffer=function(t){return void 0===t&&(t={}),n.i.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null},r.getActiveUnit=function(){return this.gl.getParameter(i.a.ACTIVE_TEXTURE)-i.a.TEXTURE0},r.bind=function(t){void 0===t&&(t=this.textureUnit);var e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(e.TEXTURE0+t)),e.bindTexture(this.target,this.handle),t},r.unbind=function(t){void 0===t&&(t=this.textureUnit);var e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(e.TEXTURE0+t)),e.bindTexture(this.target,null),t},r._getDataType=function(t){var e=t.data,r=t.compressed;return void 0!==r&&r?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof u.a?{data:e.handle,dataType:"buffer"}:e instanceof E?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}},r._deduceParameters=function(t){var e=t.format,r=t.data,a=t.width,i=t.height,n=t.dataFormat,s=t.type,o=t.compressed,u=c.b[e];n=n||u&&u.dataFormat,s=s||u&&u.types[0],o=o||u&&u.compressed;var f=this._deduceImageSize(r,a,i);return{dataFormat:n,type:s,compressed:o,width:a=f.width,height:i=f.height,format:e,data:r}},r._deduceImageSize=function(t,e,r){var a;return a="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:r}:{width:e>=0?e:1,height:r>=0?r:1},Object(f.a)(a,"Could not deduced texture size"),Object(f.a)(void 0===e||a.width===e,"Deduced texture width does not match supplied width"),Object(f.a)(void 0===r||a.height===r,"Deduced texture height does not match supplied height"),a},r._createHandle=function(){return this.gl.createTexture()},r._deleteHandle=function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")},r._getParameter=function(t){switch(t){case i.a.TEXTURE_WIDTH:return this.width;case i.a.TEXTURE_HEIGHT:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}},r._setParameter=function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case i.a.TEXTURE_MIN_LOD:case i.a.TEXTURE_MAX_LOD:this.gl.texParameterf(this.handle,t,e);break;case i.a.TEXTURE_WIDTH:case i.a.TEXTURE_HEIGHT:Object(f.a)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this},r._isNPOT=function(){return!Object(n.h)(this.gl)&&(!(!this.width||!this.height)&&(!Object(h.b)(this.width)||!Object(h.b)(this.height)))},r._updateForNPOT=function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)},r._getNPOTParam=function(t,e){if(this._isNPOT())switch(t){case i.a.TEXTURE_MIN_FILTER:-1===g.indexOf(e)&&(e=i.a.LINEAR);break;case i.a.TEXTURE_WRAP_S:case i.a.TEXTURE_WRAP_T:e!==i.a.CLAMP_TO_EDGE&&(e=i.a.CLAMP_TO_EDGE)}return e},e}(o.a)},viZF:function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));var a=r("JX7q"),i=r("dI71"),n=r("73Rc"),s=r("lHlH"),o=r("rfXe"),u=r("AFhB"),c=r("3LCa"),f=function(t){function e(e,r){var i;return void 0===r&&(r={}),Object(s.a)(e),r=Object.assign({depth:1},r,{target:n.a.TEXTURE_3D,unpackFlipY:!1}),(i=t.call(this,e,r)||this).initialize(r),Object.seal(Object(a.a)(i)),i}return Object(i.a)(e,t),e.isSupported=function(t){return Object(s.h)(t)},e.prototype.setImageData=function(t){var e=this,r=t.level,a=void 0===r?0:r,i=t.dataFormat,o=void 0===i?n.a.RGBA:i,f=t.width,h=t.height,l=t.depth,d=void 0===l?1:l,g=t.border,E=void 0===g?0:g,b=t.format,m=t.type,_=void 0===m?n.a.UNSIGNED_BYTE:m,v=t.offset,A=void 0===v?0:v,T=t.data,p=t.parameters,R=void 0===p?{}:p;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(s.n)(this.gl,R,(function(){ArrayBuffer.isView(T)&&e.gl.texImage3D(e.target,a,o,f,h,d,E,b,_,T),T instanceof c.a&&(e.gl.bindBuffer(n.a.PIXEL_UNPACK_BUFFER,T.handle),e.gl.texImage3D(e.target,a,o,f,h,d,E,b,_,A))})),T&&T.byteLength)this._trackAllocatedMemory(T.byteLength,"Texture");else{var y=u.a[this.dataFormat]||4,F=u.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*y*F,"Texture")}return this.loaded=!0,this},e}(o.a)}}]);